{"version":3,"sources":["DisplayUtils.js","components/CanvasWrapper.js","useBounds.js","components/MainMap.js","App.js","serviceWorker.js","index.js"],"names":["polarToCart","rad","dist","x","Math","cos","y","sin","numToHex","c","hex","round","toString","length","colorTemperatureToRGB","kelvin","red","green","blue","temp","log","pow","r","g","b","rgbToHex","clamp","min","max","getMousePos","canvas","evt","rect","getBoundingClientRect","clientX","left","clientY","top","CanvasWrapper","onContextChange","onMouseMove","onDoubleClick","onMouseLeave","style","props","canvasRef","useRef","console","height","useEffect","current","ctx","getContext","imageSmoothingEnabled","width","ref","mousePos","useBounds","React","debouncedHandleResize","fn","ms","timer","_","clearTimeout","setTimeout","apply","arguments","debounce","setBounds","window","innerHeight","innerWidth","addEventListener","removeEventListener","useState","bounds","myDist","x1","y1","x2","y2","getTouchCoords","MainMap","data","parseStar","onStarHover","onStarSelect","zoom","setZoom","mouseDown","setMouseDown","pan","setPan","parsedData","setParsedData","Quadtree","myTree","handleCanvasHover","event","movementX","movementY","getWorldCoords","elements","retrieve","abs","sortedElems","point","sort","a","loc","hoverCtx","entry","hoveredStar","drawSelectedStar","canvasProps","panEvent","zoomEvent","hoverEvent","activeTouches","onTouchStart","e","Array","changedTouches","keys","forEach","k","t","identifier","touches","preventDefault","onTouchEnd","onTouchMove","o1","o2","n1","n2","oDist","nDist","sqrt","dx","dy","useTouchTracking","delta","canvasStyle","position","mapCtx","getScreenCoords","useCallback","pData","map","clear","color","size","insert","fillStyle","fillRect","center","count","opacity","isVisible","sX","sY","s","font","units","scale","label","getScaleBar","fillText","clearRect","drawX","drawY","par","radius","lum","toFixed","onMouseDown","onMouseUp","onWheel","deltaMode","deltaY","document","App","className","entries","ra","dec","scaleFactor","log10","floor","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.1f0bc49d.chunk.js","sourcesContent":["export const polarToCart = (rad, dist) => ({\n    x: dist * Math.cos(rad),\n    y: dist * Math.sin(rad)\n})\n\nexport const numToHex = (c) => {\n  var hex = Math.round(c).toString(16);\n  return hex.length === 1 ? \"0\" + hex : hex;\n}\n\nconst rgbToHex = ({r, g, b}) => \"#\"+numToHex(r)+numToHex(g)+numToHex(b);\n\n\nexport const colorTemperatureToRGB = kelvin => {\n  var temp = kelvin / 100;\n  var red, green, blue;\n  if( temp <= 66 ){ \n      red = 255; \n      green = temp;\n      green = 99.4708025861 * Math.log(green) - 161.1195681661;\n      if( temp <= 19){\n          blue = 0;\n      } else {\n          blue = temp-10;\n          blue = 138.5177312231 * Math.log(blue) - 305.0447927307;\n      }\n  } else {\n      red = temp - 60;\n      red = 329.698727446 * Math.pow(red, -0.1332047592);\n      green = temp - 60;\n      green = 288.1221695283 * Math.pow(green, -0.0755148492 );\n      blue = 255;\n  }\n\n  return rgbToHex({\n      r : clamp(red,   0, 255),\n      g : clamp(green, 0, 255),\n      b : clamp(blue,  0, 255)\n  })\n}\n\n\nexport const clamp = ( x, min, max ) => {\n\n  if(x<min){ return min; }\n  if(x>max){ return max; }\n\n  return x;\n\n}","import React, {useRef, useEffect} from 'react';\n\n\nfunction getMousePos(canvas, evt) {\n  var rect = canvas.getBoundingClientRect();\n  return {\n    x: evt.clientX - rect.left,\n    y: evt.clientY - rect.top\n  };\n}\nconst myDist = ({x:x1,y:y1}, {x:x2,y:y2}) => ((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2));\n\nconst CanvasWrapper = ({onContextChange, onMouseMove, onDoubleClick, onMouseLeave, style, ...props}) => {\n  \n  const canvasRef = useRef(null);\n  console.log('rendering with height', style.height)\n  \n  useEffect(() => {\n    if(canvasRef.current) {\n      let ctx = canvasRef.current.getContext(\"2d\");\n      ctx.imageSmoothingEnabled = false;\n      const width = canvasRef.current.width;\n      const height = canvasRef.current.height;\n      onContextChange(ctx, {width, height});\n    }\n  }, [onContextChange]);\n\n  const handleCanvasHover = evt => {\n    if(onMouseMove) {\n      const mousePos = getMousePos(canvasRef.current, evt);\n      onMouseMove(mousePos, evt)\n    }\n  }\n\n  const handleCanvasClick = evt => {\n    if(onDoubleClick) {\n      const mousePos = getMousePos(canvasRef.current, evt);\n      onDoubleClick(mousePos, evt)\n    }\n  }\n\n  return (\n    <canvas \n      style={style} \n      ref={canvasRef} \n      width={style.width} \n      height={style.height}\n      onMouseMove={handleCanvasHover}\n     \n      onDoubleClick={handleCanvasClick}\n      onMouseLeave={onMouseLeave}\n      {...props}\n    ></canvas>\n  );\n}\n\nexport default CanvasWrapper;\n","import React, {useRef, useEffect, useState, useCallback} from 'react';\nfunction debounce(fn, ms) {\n  let timer\n  return _ => {\n    clearTimeout(timer)\n    timer = setTimeout(_ => {\n      timer = null\n      fn.apply(this, arguments)\n    }, ms)\n  };\n}\n\nconst useBounds = () => {\n  React.useEffect(() => {\n    const debouncedHandleResize = debounce(function handleResize() {\n      setBounds({\n        height: window.innerHeight,\n        width: window.innerWidth\n      })\n    }, 200)\n\n    window.addEventListener('resize', debouncedHandleResize)\n\n    return _ => {\n      window.removeEventListener('resize', debouncedHandleResize)\n    }\n    \n  });\n\n  \n  const [bounds, setBounds] = useState({width:window.innerWidth, height:window.innerHeight})\n  return bounds;\n}\n\nexport default useBounds;","import React, {useRef, useEffect, useState, useCallback} from 'react';\nimport Quadtree from '@timohausmann/quadtree-js';\nimport CanvasWrapper from './CanvasWrapper'\n\nimport {clamp} from '../DisplayUtils';\nimport useBounds from '../useBounds';\n\nconst getScaleBar = zoom => {\n  let length = zoom/4\n  let units = ' Parsec'\n  let scale = 0.25\n  if(length < 50) {\n    while(length < 50) {\n      units = ' Parsecs'\n      length*=2\n      scale*=2\n    }\n  } else if(length > 100) {\n    units = ' AU'\n    length /= 206265 \n    while(length < 50) {\n      length*=2\n      scale*=2\n    }\n    if(length > 100) {\n      units = ' Solar Radii'\n      length /= 215 \n      while(length < 50) {\n        length*=2\n        scale*=2\n      }\n    }\n  }\n  \n  return {label: scale+units, length}\n}\n\nconst myDist = ({x:x1,y:y1}, {x:x2,y:y2}) => ((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2));\nconst sortPoints = (point, elems) => elems.sort(({loc:a},{loc:b}) => myDist(point, a)-myDist(point, b));\n\nconst getTouchCoords = ({clientX, clientY}) => ({x:clientX, y:clientY})\nconst useTouchTracking = (panEvent, zoomEvent, hoverEvent) => {\n  let activeTouches = useRef({})\n  return {\n    canvasProps: {\n      onTouchStart:e => {\n        [...Array(e.changedTouches.length).keys()].forEach(k => {\n          const t = e.changedTouches[k];\n          activeTouches.current[t.identifier] = getTouchCoords(t)\n        }) \n        if(e.touches.length == 1) {\n          hoverEvent( getTouchCoords(e.touches[0]))\n        }\n        e.preventDefault();\n      },\n      onTouchEnd:e => {\n        [...Array(e.changedTouches.length).keys()].forEach(k => {\n          const t = e.changedTouches[k];\n          delete activeTouches.current[t.identifier];\n        })\n        e.preventDefault();\n      },\n      onTouchMove:e => {\n        if(e.touches.length == 2) {\n          if(activeTouches.current[e.touches[0].identifier] && activeTouches.current[e.touches[1].identifier]) {\n            const o1 = activeTouches.current[e.touches[0].identifier];\n            const o2 = activeTouches.current[e.touches[1].identifier];\n            const n1 = getTouchCoords(e.touches[0]);\n            const n2 = getTouchCoords(e.touches[1])\n            const oDist = myDist(o1,o2)\n            const nDist = myDist(n1, n2)\n            activeTouches.current[e.touches[0].identifier] = n1;\n            activeTouches.current[e.touches[1].identifier] = n2\n            zoomEvent((Math.sqrt(nDist)-Math.sqrt(oDist))/10)\n            const dx = (n1.x+n2.x)/2-(o1.x+o2.x)/2\n            const dy = (n1.y+n2.y)/2-(o1.y+o2.y)/2\n            panEvent({x:dx, y:dy})\n          }\n          \n        }\n        else {\n          hoverEvent( getTouchCoords(e.touches[0]))\n        }\n         \n      }\n    },\n\n  }\n}\n\nfunction MainMap({data, parseStar, onStarHover, onStarSelect}) {\n\n  const {width, height} = useBounds();\n  const [zoom, setZoom] = useState(1);\n  const [mouseDown, setMouseDown] = useState(false);\n  const [pan, setPan] = useState({x:0, y:0});\n  const [parsedData, setParsedData] = useState([]);\n  const [myTree] = useState(new Quadtree({\n    x: 0,\n    y: 0,\n    width: 10000,\n    height: 10000,\n  }, 50, 8));\n\n  const handleCanvasHover = (mousePos, event) => {\n    if(mouseDown) {\n      \n      const {movementX, movementY} = event;\n      setPan({x:pan.x+movementX/zoom, y:pan.y+movementY/zoom})\n    } else {\n      const {x,y} = getWorldCoords(mousePos)\n      const elements = myTree.retrieve({x:Math.abs(x), y:Math.abs(y), width:8, height:8});\n      //const message = 'Mouse position: ' + x + ',' + y// +' with overlaps '+elements.length;\n      // console.log('nodes', myTree.nodes, 'objects', myTree.objects);\n      //console.log(message);\n      const sortedElems = sortPoints({x:x, y:y}, elements);\n      if(hoverCtx.current) {\n        const [{loc={}, entry}={}]= sortedElems;\n        const ctx = hoverCtx.current\n        hoveredStar.current = {loc, entry}\n        drawSelectedStar(ctx, hoveredStar.current)\n        \n\n        if(onStarHover && entry) onStarHover(entry)\n      }\n    }\n    \n\n  }\n\n  const {canvasProps} = useTouchTracking(\n    ({x,y}) => setPan({x:pan.x+x/zoom, y:pan.y+y/zoom}), \n    delta =>  setZoom(clamp(zoom+zoom*delta/25, 0.1 , 10000000000)),\n    handleCanvasHover)\n\n  const canvasStyle = {    \n    position:'absolute',\n    left:'0px',\n    top:'0px',\n    width,\n    height,\n  };\n  \n  const mapCtx = useRef(null);\n  const hoverCtx = useRef(null);\n  const hoveredStar = useRef({})\n  \n  const getScreenCoords = useCallback(({x,y}) => ({x:((x+pan.x)*zoom)+(width/2), y:((y+pan.y)*zoom)+(height/2)}),[zoom, width, height, pan])\n  const getWorldCoords = useCallback(({x,y}) => ({x:(x-(width/2))/zoom-pan.x, y:(y-(height/2))/zoom-pan.y}),[zoom, width, height, pan])\n\n  useEffect(() => {\n    const pData = data.map(entry => ({...parseStar(entry), entry})).sort((a, b) => b.entry[6] - a.entry[6]);\n    setParsedData(pData);\n    myTree.clear();\n    pData.forEach(({x, y, color, size, entry}) => myTree.insert({\n      x: Math.abs(x),\n      y: Math.abs(y),\n      loc: {x, y},\n      width: size,\n      height: size,\n      size,\n      color,\n      entry,\n    }))\n  }, [data, myTree, parseStar])\n\n  useEffect(() => {\n    if(mapCtx.current) {\n      let ctx = mapCtx.current\n      \n      ctx.fillStyle = \"#000000\";\n      ctx.fillRect(0,0, width, height);\n      ctx.fillStyle = \"#0000FF\";\n      const center = getScreenCoords({x:0, y:0})\n      ctx.fillRect(center.x,center.y,5,5);\n      ctx.fillStyle = \"#FFFFFF66\";\n      let count = 0;\n      parsedData.forEach(({x, y, color, size, opacity, isVisible, entry}) => {\n        if ( isVisible) {\n          const {x:sX, y:sY} = getScreenCoords({x,y})\n          if(sX > 0 && sX < width && sY > 0 && sY < height && count < 50000) {\n            const s = clamp((entry[5]*2*zoom)/4.435e+7, size, 1000)\n            ctx.fillStyle = color;\n            if(s === size) ctx.fillStyle = color+opacity\n            \n            ctx.fillRect(sX-s/2,sY-s/2,s,s);\n            count++;\n          }\n        }\n      })\n      ctx.font = \"12px Verdana\";\n      ctx.fillStyle = \"#FFFFFF\";\n      const {label, length} = getScaleBar(zoom);\n      ctx.fillText(label, 20, height-30);\n      ctx.fillRect(20, height-20, length , 3);\n      if(hoverCtx.current && hoveredStar.current.loc) {\n        drawSelectedStar(hoverCtx.current, hoveredStar.current)\n      }\n    }\n      \n  });\n\n \n  const drawSelectedStar = (ctx, {loc, entry}) => {\n    ctx.clearRect(0, 0, canvasStyle.width, canvasStyle.height);\n    ctx.fillStyle = \"#00FF00\";\n    const {x:drawX, y:drawY} = getScreenCoords(loc)\n    ctx.fillRect(drawX-1,drawY-1,3,3);\n    ctx.font = \"12px Verdana\";\n    ctx.fillStyle = \"#FFFFFF\";\n    if(entry) {\n      const [identifier,ra,dec,par,temp, radius, lum] = entry;\n      ctx.fillText('Star: '+identifier, 20, 20);\n      ctx.fillText('Distance: '+(1000/par).toFixed(1)+' Parsecs', 20, 40);\n      ctx.fillText('Temp: '+temp.toFixed()+'K', 20, 60);\n      ctx.fillText('Radius: '+radius.toFixed(2)+'R☉', 20, 80);\n      ctx.fillText('Luminosity : '+lum.toFixed(2)+'L☉', 20, 100);\n    }\n  }\n\n\n  // const handleCanvasHover = (mousePos, event) => {\n  //   if(mouseDown) {\n      \n  //     const {movementX, movementY} = event;\n  //     console.log('movement', movementX, movementY);\n  //     setPan({x:pan.x+movementX/zoom, y:pan.y+movementY/zoom})\n  //   } else {\n  //     const {x,y} = getWorldCoords(mousePos)\n  //     const elements = myTree.retrieve({x:Math.abs(x), y:Math.abs(y), width:8, height:8});\n  //     //const message = 'Mouse position: ' + x + ',' + y// +' with overlaps '+elements.length;\n  //     // console.log('nodes', myTree.nodes, 'objects', myTree.objects);\n  //     //console.log(message);\n  //     const sortedElems = sortPoints({x:x, y:y}, elements);\n  //     if(hoverCtx.current) {\n  //       const [{loc={}, entry}={}]= sortedElems;\n  //       const ctx = hoverCtx.current\n  //       hoveredStar.current = {loc, entry}\n  //       drawSelectedStar(ctx, hoveredStar.current)\n        \n\n  //       if(onStarHover && entry) onStarHover(entry)\n  //     }\n  //   }\n    \n\n  // }\n\n  const handleScroll = e => {\n    const {deltaMode, deltaY} = e;\n    setZoom(clamp(zoom+zoom*deltaY/10, 0.1 , 10000000000))\n    e.preventDefault();\n  }\n  return (\n    <div>\n      <CanvasWrapper style={canvasStyle} onContextChange={c => mapCtx.current = c}/>\n      <CanvasWrapper \n      style={canvasStyle} \n      onMouseDown={() => setMouseDown(true)}\n      onMouseUp={() => setMouseDown(false)}\n      onMouseMove={handleCanvasHover} \n      onDoubleClick={(mousePos) => setPan({x:-hoveredStar.current.loc.x, y:-hoveredStar.current.loc.y})}\n      onWheel={handleScroll} \n      onContextChange={c => hoverCtx.current = c}\n      {...canvasProps}\n      />\n    </div>\n  );\n}\n\nexport default MainMap;\n","import React from 'react';\nimport {polarToCart, colorTemperatureToRGB, clamp, numToHex} from './DisplayUtils';\nimport './App.css';\nimport entries from './data/300kEntriesCube.json'\nimport MainMap from './components/MainMap';\n\n\n\nconst parseStar = ([identifier,ra,dec,par,temp, radius, lum], scaleFactor=1) => {\n  const dist = ((1000/par)*Math.cos(dec))*scaleFactor\n  const height = ((1000/par)*Math.sin(dec))*scaleFactor\n  const {x,y} = polarToCart(ra, dist)\n  const color = colorTemperatureToRGB(temp);\n  const size = Math.log10(lum+1)+1;//lum>100?(clamp(1+(Math.l(lum+1)),0,3)):1\n  const opacity = numToHex(Math.floor(clamp(Math.log10(lum+1),0.5, 1)*255))\n  const isVisible = true//Math.abs(height) < 2000 && Math.abs(x) < 10000 &&  Math.abs(y) < 10000;\n  return {\n    x,\n    y,\n    color,\n    size,\n    opacity,\n    isVisible,\n  }\n}\n\ndocument.addEventListener('gesturestart', function (e) {\n  e.preventDefault();\n});\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <MainMap data={entries} parseStar={e => parseStar(e, 10)}/>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}